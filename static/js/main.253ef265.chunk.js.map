{"version":3,"sources":["services/api.js","components/Searchbar.js","components/ImageGalleryItem.js","components/Button.js","components/ImageGallery.js","components/Modal.js","components/Loader.js","App.js","index.js"],"names":["FetchApi","base_url","api_key","this","_value","_page","value","a","url","page","axios","get","result","data","hits","message","Searchbar","state","handleChange","e","setState","target","toLowerCase","handleSubmit","preventDefault","trim","toast","error","props","clearRender","onSubmit","className","type","onChange","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","largeImageURL","webformatURL","onClose","onClick","src","alt","Button","ImageGallery","arr","handleClick","map","id","tags","length","modalRoot","document","querySelector","Modal","handleKeyDown","code","handleOverlayClick","currentTarget","window","addEventListener","removeEventListener","createPortal","LoaderSpin","color","height","width","timeout","newFetchApi","App","status","showModal","windowScroll","scrollTo","top","documentElement","scrollHeight","behavior","checkLengthArr","warn","handleSubmitForm","toggleModal","incrementPage","searchImages","then","prev","catch","err","console","log","prevState","prevProps","resetPage","theme","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.253ef265.chunk.js","sourcesContent":["import axios from 'axios';\n\nexport class FetchApi {\n  constructor(base_url, api_key) {\n    this.base_url = base_url;\n    this.api_key = api_key;\n    this._value = '';\n    this._page = 1;\n  }\n  get value() {\n    return this._value;\n  }\n  set value(value) {\n    return (this._value = value);\n  }\n  get page() {\n    return this._page;\n  }\n  set page(value) {\n    return (this._page += value);\n  }\n  incrementPage() {\n    return (this._page += 1);\n  }\n  resetPage() {\n    return (this._page = 1);\n  }\n\n  async searchImages() {\n    let url = `${this.base_url}?q=${this.value}&page=${this.page}&key=${this.api_key}&image_type=photo&orientation=horizontal&per_page=12`;\n    try {\n      const result = await axios.get(url);\n      const data = result.data.hits;\n      return data;\n    } catch (err) {\n      return err.message;\n    }\n  }\n}\n","import { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nclass Searchbar extends Component {\n  state = {\n    value: '',\n  };\n\n  handleChange = e => {\n    this.setState({ value: e.target.value.toLowerCase() });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    if (this.state.value.trim() === '') {\n      toast.error('Введите корректное название!');\n      this.props.clearRender();\n      return;\n    }\n\n    this.props.onSubmit(this.state.value);\n    this.setState({ value: '' });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            value={this.state.value}\n            onChange={this.handleChange}\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default function ImageGalleryItem({\n  largeImageURL,\n  webformatURL,\n  onClose,\n}) {\n  const onClickGalleryItem = () => {\n    onClose(largeImageURL);\n  };\n  return (\n    <li className=\"ImageGalleryItem\" onClick={onClickGalleryItem}>\n      <img\n        src={webformatURL}\n        data-source={largeImageURL}\n        alt=\"pictures\"\n        className=\"ImageGalleryItem-image\"\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  webformatURL: PropTypes.string.isRequired,\n  largeImageURL: PropTypes.string.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nexport default function Button({ onClick }) {\n  return (\n    <div className=\"Button-div\">\n      <button className=\"Button\" type=\"button\" onClick={onClick}>\n        LoadMore\n      </button>\n    </div>\n  );\n}\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ImageGalleryItem from './ImageGalleryItem';\nimport Button from './Button';\n\nclass ImageGallery extends Component {\n  render() {\n    const { arr, onClose, handleClick } = this.props;\n    return (\n      <>\n        <ul className=\"ImageGallery\">\n          {arr.map(({ id, tags, webformatURL, largeImageURL }) => (\n            <ImageGalleryItem\n              key={id}\n              webformatURL={webformatURL}\n              largeImageURL={largeImageURL}\n              onClose={onClose}\n              tags={tags}\n            />\n          ))}\n        </ul>\n        {arr.length % 12 === 0 && <Button onClick={handleClick} />}\n      </>\n    );\n  }\n}\n\nexport default ImageGallery;\n\nImageGallery.propTypes = {\n  arr: PropTypes.array.isRequired,\n  onClose: PropTypes.func.isRequired,\n  handleClick: PropTypes.func.isRequired,\n};\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleOverlayClick = e => {\n    if (e.target === e.currentTarget) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { largeImageURL } = this.props;\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleOverlayClick}>\n        <div className=\"Modal\">\n          <img src={largeImageURL} alt={largeImageURL} />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\nexport default Modal;\nModal.propTypes = {\n  largeImageURL: PropTypes.string.isRequired,\n};\n","import Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nexport default function LoaderSpin() {\n  return (\n    <Loader\n      type=\"Circles\"\n      color=\"#3f51b5\"\n      height={100}\n      width={100}\n      timeout={3000}\n    />\n  );\n}\n","import './App.css';\nimport './components/styles.css';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport { toast } from 'react-toastify';\nimport { FetchApi } from './services/api';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Modal from './components/Modal';\nimport LoaderSpin from './components/Loader';\n\nconst base_url = `https://pixabay.com/api/`;\nconst api_key = `23089683-10e6383e94187ff47334541d4`;\nconst newFetchApi = new FetchApi(base_url, api_key);\n\nclass App extends Component {\n  state = {\n    value: '',\n    arr: [],\n    status: 'idle',\n    showModal: false,\n    largeImageURL: '',\n  };\n\n  componentDidUpdate(prevState, prevProps) {\n    if (prevProps.value !== this.state.value) {\n      this.setState({ status: 'pending' });\n      newFetchApi.resetPage();\n      newFetchApi.value = this.state.value;\n      newFetchApi\n        .searchImages()\n        .then(data => {\n          this.setState({ arr: data });\n          this.checkLengthArr();\n        })\n        .catch(err => {\n          console.log(err);\n          this.setState({ status: 'error' });\n        });\n    }\n    this.windowScroll();\n  }\n\n  windowScroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  checkLengthArr = () => {\n    if (this.state.arr.length !== 0) {\n      this.setState({ status: 'resolved' });\n      return;\n    }\n    toast.warn('Изображений с таким названием, к сожалению, нет');\n    this.setState({ status: 'idle' });\n  };\n\n  handleSubmitForm = value => {\n    this.setState({ value });\n  };\n\n  toggleModal = largeImageURL => {\n    this.setState(state => ({\n      showModal: !state.showModal,\n      largeImageURL: largeImageURL,\n    }));\n  };\n\n  clearRender = () => {\n    this.setState({ status: 'idle' });\n  };\n\n  handleClick = () => {\n    newFetchApi.incrementPage();\n    newFetchApi\n      .searchImages()\n      .then(data => {\n        this.setState(prev => ({\n          arr: [...prev.arr, ...data],\n          status: 'resolved',\n        }));\n        this.windowScroll();\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ status: 'error' });\n      });\n  };\n\n  render() {\n    const { arr, status, value, showModal, largeImageURL } = this.state;\n    const { handleSubmitForm, clearRender, handleClick, toggleModal } = this;\n\n    return (\n      <div>\n        <Searchbar onSubmit={handleSubmitForm} clearRender={clearRender} />\n        <ToastContainer theme=\"colored\" autoClose={2000} />\n\n        {status === 'idle' && <p>Начните поиск изображений</p>}\n\n        {status === 'pending' && (\n          <div className=\"Loader\">\n            <LoaderSpin />\n          </div>\n        )}\n\n        {status === 'resolved' && (\n          <ImageGallery\n            arr={arr}\n            handleClick={handleClick}\n            onClose={toggleModal}\n          />\n        )}\n\n        {showModal && (\n          <Modal\n            value={value}\n            onClose={this.toggleModal}\n            largeImageURL={largeImageURL}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}